## API Report File for "@zhengxs/dingtalk-event-hubs"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts
import { AuthCredential } from '@zhengxs/dingtalk-auth';
import { IdentityClient } from '@zhengxs/dingtalk-auth';

// @public (undocumented)
export type ConnectionParamsOptions = {
  ua?: string;
  subscriptions?: OperationOption[];
};

// @public (undocumented)
export function createHttpLink({ client, credential, ...rest }: Required<HttpLinkOptions>): Promise<string>;

// @public (undocumented)
export type EffectCleanup = () => void;

// @public (undocumented)
export interface GraphAPIResponse {
  // (undocumented)
  response: {
    statusLine?: {
      code?: number;
      reasonPhrase?: string;
    };
    headers?: Record<string, string>;
    body?: string;
  };
}

// @public (undocumented)
export class HttpLink {
  constructor(options: HttpLinkOptions);
  // (undocumented)
  protected client: IdentityClient<AuthCredential>;
  // (undocumented)
  create(): Promise<string>;
  // (undocumented)
  protected credential: AuthCredential;
  // (undocumented)
  protected subscriptions: OperationOption[];
  // (undocumented)
  protected ua: string;
}

// @public (undocumented)
export interface HttpLinkOptions extends ConnectionParamsOptions {
  // (undocumented)
  client?: IdentityClient<AuthCredential>;
  // (undocumented)
  credential?: AuthCredential;
}

// @public (undocumented)
export class HubConnection {
  constructor(options: HubConnectionOptions, webSocketImpl?: typeof globalThis.WebSocket);
  // (undocumented)
  protected buildMessage(id: string, payload: NonNullable<unknown>): SendMessage;
  // (undocumented)
  close(isForced?: boolean, closedByUser?: boolean): void;
  // (undocumented)
  protected connect(): void;
  emit(message: SendMessage): void;
  // (undocumented)
  protected httpLink?: HttpLink;
  invoke(id: string, data: unknown): void;
  // (undocumented)
  on(eventName: string | symbol, listener: (...args: any[]) => void): () => void;
  // (undocumented)
  protected processCallbacks(event: ParsedEvent): void;
  // (undocumented)
  protected processReceivedData(receivedData: string): void;
  // (undocumented)
  protected processSystemEvent(event: ParsedEvent): void;
  send(id: string, payload: NonNullable<unknown>): void;
  // (undocumented)
  start(): Promise<void>;
  // (undocumented)
  get status(): number;
  // (undocumented)
  protected url?: string;
}

// @public (undocumented)
export class HubConnectionBuilder {
  // (undocumented)
  build(options?: HubConnectionOptions): HubConnection;
  // (undocumented)
  protected httpLink?: HttpLink;
  // (undocumented)
  protected url?: string;
  // (undocumented)
  withClient(client: IdentityClient<AuthCredential>, options?: ConnectionParamsOptions): HubConnectionBuilder;
  // (undocumented)
  withCredential(credential: AuthCredential, options?: ConnectionParamsOptions): HubConnectionBuilder;
  // (undocumented)
  withUrl(url: string): HubConnectionBuilder;
}

// @public (undocumented)
export interface HubConnectionOptions {
  // (undocumented)
  httpLink?: HttpLink;
  // (undocumented)
  lazy?: boolean;
  // (undocumented)
  minTimeout?: number;
  // (undocumented)
  reconnect?: boolean;
  // (undocumented)
  reconnectionAttempts?: number;
  // (undocumented)
  timeout?: number;
  // (undocumented)
  url?: string;
}

// @public (undocumented)
export interface Operation {
  // (undocumented)
  handler: Operation.Handler;
  // (undocumented)
  options: Operation.Option[];
}

// @public (undocumented)
export namespace Operation {
  // (undocumented)
  export type Handler = (event: ParsedEvent) => void;
  // (undocumented)
  export type Option = {
    type: OperationType;
    topic: (NonNullable<unknown> & string) | '*';
  };
}

// @public (undocumented)
export type OperationOption = Operation.Option;

// @public (undocumented)
export type OperationType = 'EVENT' | 'SYSTEM' | 'CALLBACK';

// @public (undocumented)
export type ParsedEvent = {
  specVersion: string;
  type: OperationType;
  headers: {
    appId: string;
    connectionId: string;
    IncomingType: string;
    messageId: string;
    time: string;
    topic: string;
    eventType?: string;
    eventBornTime?: string;
    eventId?: string;
    eventCorpId?: string;
    eventUnifiedAppId?: string;
  };
  data: string;
};

// @public (undocumented)
export type SendMessage = {
  code?: number;
  message?: string;
  headers: Record<string, string>;
  data: string;
};

// (No @packageDocumentation comment for this package)
```
