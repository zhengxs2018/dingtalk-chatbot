## API Report File for "@zhengxs/dingtalk-auth"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts
import { APIClient } from '@zhengxs/http';
import { APIClientOptions } from '@zhengxs/http';
import { APIPromise } from '@zhengxs/http';
import { APIResponseProps } from '@zhengxs/http';
import { FinalRequestOptions } from '@zhengxs/http';
import { PromiseOrValue } from '@zhengxs/http';

// @public
export class AuthCredential extends TokenSessionCredential<AuthGetTokenParams | void> {
  constructor(params?: AuthGetTokenParams);
  // (undocumented)
  clientId?: string;
  // (undocumented)
  clientSecret?: string;
  // (undocumented)
  protected request(params?: AuthGetTokenParams): Promise<TokenResponse>;
}

// @public (undocumented)
export interface AuthGetTokenParams extends GetTokenParams {
  clientId?: string;
  clientSecret?: string;
}

// @public
export abstract class BaseTokenCredential<Params = GetTokenParams>
  implements TokenCredential<Params>
{
  // (undocumented)
  protected client: IdentityClient;
  // (undocumented)
  getClient(): IdentityClient<TokenCredential<void | {}>>;
  // (undocumented)
  abstract getToken(params: Params): Promise<TokenResponse>;
  // (undocumented)
  getTokenValue(params: Params): Promise<string>;
  // (undocumented)
  setClient(client: IdentityClient): void;
}

// @public
export class CorpAuthCredential extends TokenSessionCredential<CorpAuthGetTokenParams | void> {
  constructor(options?: CorpAuthGetTokenParams);
  // (undocumented)
  authCorpId?: string;
  // (undocumented)
  protected request(params: CorpAuthGetTokenParams): Promise<TokenResponse>;
  // (undocumented)
  suiteKey?: string;
  // (undocumented)
  suiteSecret?: string;
  // (undocumented)
  suiteTicket?: string;
}

// @public (undocumented)
export interface CorpAuthGetTokenParams extends GetTokenParams {
  authCorpId?: string;
  suiteKey?: string;
  suiteSecret?: string;
  suiteTicket?: string;
}

// @public (undocumented)
export function dingtalkParseResponse<T>(props: APIResponseProps): Promise<T>;

// @public (undocumented)
export type ExtractGetTokenParams<Credential> =
  Credential extends TokenCredential<infer Params> ? Params : GetTokenParams;

// @public (undocumented)
export type GetTokenParams = NonNullable<unknown>;

// @public (undocumented)
export class IdentityClient<
  Credential extends TokenCredential = TokenCredential,
> extends APIClient {
  constructor(options?: IdentityClientOptions<Credential>);
  // (undocumented)
  protected authHeaders(): Promise<Record<string, string>>;
  // (undocumented)
  getCredential(): Credential;
  // (undocumented)
  getToken(): Promise<TokenResponse>;
  // (undocumented)
  getTokenValue(): Promise<string>;
  // (undocumented)
  request<Req extends NonNullable<unknown>, Rsp>(
    options: PromiseOrValue<FinalRequestOptions<Req>>,
    remainingRetries?: number | null,
  ): APIPromise<Rsp>;
  // (undocumented)
  setCredential(credential: Credential): void;
}

// @public (undocumented)
export interface IdentityClientOptions<
  Credential extends TokenCredential = TokenCredential,
> extends Partial<APIClientOptions> {
  // (undocumented)
  credential?: Credential;
}

// @public
export class SSOAuthCredential extends TokenSessionCredential<SSOAuthGetTokenParams | void> {
  constructor(params?: SSOAuthGetTokenParams);
  corpId?: string;
  // (undocumented)
  protected request(params?: SSOAuthGetTokenParams): Promise<TokenResponse>;
  ssoSecret?: string;
}

// @public (undocumented)
export interface SSOAuthGetTokenParams extends GetTokenParams {
  corpId?: string;
  ssoSecret?: string;
}

// @public
export interface TokenCredential<Params = GetTokenParams | void> {
  getToken(params: Params): Promise<TokenResponse>;
  getTokenValue(params: Params): Promise<string>;
  // @internal
  setClient(client: APIClient): void;
}

// @public (undocumented)
export interface TokenResponse {
  accessToken: string;
  expireIn: number;
}

// @public (undocumented)
export abstract class TokenSessionCredential<
  Params = GetTokenParams,
> extends BaseTokenCredential<Params> {
  // (undocumented)
  protected expiredAt?: number;
  // (undocumented)
  getToken(params: Params): Promise<TokenResponse>;
  // (undocumented)
  protected promise?: Promise<TokenResponse>;
  // (undocumented)
  protected abstract request(params: Params): Promise<TokenResponse>;
  // (undocumented)
  protected token?: TokenResponse;
}

// @public
export class UserAuthCredential extends BaseTokenCredential<UserGetTokenParams> {
  constructor(params?: UserAuthCredentialOptions);
  // (undocumented)
  clientId?: string;
  // (undocumented)
  clientSecret?: string;
  // (undocumented)
  exchangeCode(code: string): Promise<UserTokenResponse>;
  // (undocumented)
  getToken(params: UserGetTokenParamsWithCode): Promise<UserTokenResponse>;
  // (undocumented)
  getToken(
    params: UserGetTokenParamsWithRefreshToken,
  ): Promise<UserTokenResponse>;
  // (undocumented)
  refreshToken?: string;
}

// @public (undocumented)
export interface UserAuthCredentialOptions {
  clientId?: string;
  clientSecret?: string;
}

// @public (undocumented)
export type UserGetTokenParams =
  | UserGetTokenParamsWithCode
  | UserGetTokenParamsWithRefreshToken;

// @public (undocumented)
export interface UserGetTokenParamsBase
  extends UserAuthCredentialOptions,
    GetTokenParams {
  code?: string;
  grantType?: string;
  refreshToken?: string;
}

// @public (undocumented)
export interface UserGetTokenParamsWithCode extends UserGetTokenParamsBase {
  // (undocumented)
  code: string;
  // (undocumented)
  grantType?: 'authorization_code';
}

// @public (undocumented)
export interface UserGetTokenParamsWithRefreshToken
  extends UserGetTokenParamsBase {
  // (undocumented)
  grantType?: 'refresh_token';
  // (undocumented)
  refreshToken: string;
}

// @public (undocumented)
export interface UserTokenResponse extends TokenResponse {
  corpId: string;
  refreshToken: string;
}

// (No @packageDocumentation comment for this package)
```
